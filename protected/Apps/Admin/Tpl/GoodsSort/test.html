<table id="datagrid_newstab0" toolbar="#tb" class="datagrid">
    <thead>
        <tr>
            <th data-options="field:'id',align:'center'" rowspan="2" width="50">ID</th>
            <th data-options="field:'text'" width="250">标题</th>
        </tr>
    </thead>
</table>
<div id="tb" style="padding:5px;height:auto">
		<div style="margin-bottom:5px">
			<a href="#" id="btnadd_newstab0" class="easyui-linkbutton" iconCls="icon-add" plain="true">添加文档</a>
			<a href="#" id="btndel_newstab0" class="easyui-linkbutton" iconCls="icon-remove" plain="true">删除信息</a>
		</div>
		<div>
			信息搜索: <input style="line-height:16px; height:16px;border:1px solid #ccc;width:120px">
			<a href="#" class="easyui-linkbutton" iconCls="icon-search">Search</a>
		</div>
</div>
<script>
function testclick(id){
    alert(id);
    //event.stopPropagation();
}
$(function(){
	var height = $('.indexcenter').height();
	var classId = 'newstab0';
	var hrefadd = 'news/add.html';
	var hrefcancel = 'news/del.html';
	var urljson = '__APP__/NewsSort/json';
	//openDatagrid(classId,urljson,hrefadd,hrefedit,hrefcancel);
	$('#datagrid_'+classId).datagrid({
		url:urljson,
		idField:'id',
		pagination:true,
		rownumbers:true,
		fitColumns:true,
		checkbox:true,
		height:height-65,
		//singleSelect:true,
		columns:[[
                        {field:'id',title:'id',width:50},
                        {field:'text',title:'text',width:200},
		{
			field:'action2',
			title:'动作',
			width:50,
			formatter : function(value, row, index) {
				//alert(row.id);
                                //return row.index;
				return '<img src="/Public/Easyui/themes/icons/edit_add.png" width="16" height="16" onclick="testclick(\''+row.id+'\')" />&nbsp;<img src="../../themes/icons/pencil.png" width="16" height="16" onclick="admin_news_editFun(\''+row.id+'\')" />&nbsp;<img src="../../themes/icons/cancel.png" width="16" height="16" onclick="admin_news_cancelFun(\''+row.id+'\')" />&nbsp;';
			}
		}
		]],
		frozenColumns:[[
				{
					field:'ck',
					checkbox:true
				}
			]]
	});
	var p = $('#datagrid_'+classId).datagrid('getPager');
	$(p).pagination({
		pageSize: 20,//每页显示的记录条数，默认为10
		pageList: [10,20,30,40,50,100],//可以设置每页记录条数的列表
		beforePageText: '第',//页数文本框前显示的汉字
		afterPageText: '页    共 {pages} 页',
		displayMsg: '当前显示 {from} - {to} 条记录   共 {total} 条记录'
	})
	$('#btnadd_newstab0').click(function() {
		var title = '添加文档';
		openDialog(classId,hrefadd,title);
	});
	$('#btndel_newstab0').click(function() {
		var title = '删除文档';
		var ids = [];
		var rows = $('#datagrid_'+classId).datagrid('getSelections');
		for(var i=0;i<rows.length;i++){
			ids.push(rows[i].id);
		}
		if(ids==''){
			$.messager.alert('信息提示', '请选择要操作的项', 'error');
			return false;
		}
		var href = hrefcancel;
		var title = '删除信息';
		$.messager.confirm(title,href, function(){
			$.ajax({
				url:href,
				type:'post',
				data:{
					id:ids
				},
				dataType:'json',
				success:function(data){
					formAjax(data,classId);
				}
			});
		});//$

	});


})
</script>